<div class="main" fxLayout="column" fxLayoutAlign="start center">
    <mat-card>
        <mat-card-header>
            <mat-card-title>Order Status</mat-card-title>
        </mat-card-header>
        <mat-card-content >
            <div fxLayout="column" fxLayoutAlign="start center">
                <p *ngIf="order.isProcessed && !order.isCanceled">The order is already processed, Ordered at: {{order.orderDate | date:'short'}}
                </p>
                <P *ngIf="!order.isProcessed && !order.isCanceled">The order is not processed yet, Ordered at: {{order.orderDate | date:'short'}}
                </P>
                <P *ngIf="order.isCanceled">The order is canceled, Ordered at: {{order.orderDate | date:'short'}}
                </P>
            </div>
            <button class="btn-status" mat-button color='primary' *ngIf="!order.isProcessed && !order.isCanceled" (click)='cancelOrder()'>
                Cancel Order
            </button>
        </mat-card-content>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-title>Order Items</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="item" *ngFor="let item of order.orderItems">
                <div class="header" fxLayout="row" fxLayoutAlign="space-between end">
                    <h3 class="product-name">{{item.productName}}</h3>
                    <p class="product-id">Total item price </p>
                </div>
                <mat-divider></mat-divider>
                <div class="header" fxLayout="row" fxLayoutAlign="space-between end">
                    <p class="product-quantity">Quantity: {{item.quantity}}</p>
                    <p class="product-price">{{item.price | currency:'MAD'}}</p>
                </div>
            </div>
            <div class="item">
                <mat-divider></mat-divider>
                <div class="header" fxLayout="row" fxLayoutAlign="space-between end">
                    <p class="product-quantity">Total of items: {{order.totalQuantity()}}</p>
                    <p class="product-price">Total: <strong>{{order.totalPrice() | currency:'MAD'}}</strong></p>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
    <mat-card>
        <mat-card-header>
            <mat-card-title>Shipping Informations</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="item">
                <div class="header" fxLayout="row" fxLayoutAlign="space-between end">
                    <h3 class="product-name">{{order.shippingInfo.firstName}}, {{order.shippingInfo.lastName}}</h3>
                    <p class="product-id">Phone number: {{order.shippingInfo.phoneNumber}}</p>
                </div>
                <mat-divider></mat-divider>
                <div class="header" fxLayout="row" fxLayoutAlign="center end">
                    <p class="product-quantity">{{order.shippingInfo.firstLine | lowercase}},
                        {{order.shippingInfo.secondLine | lowercase}}, {{order.shippingInfo.city | lowercase}}</p>
                </div>
                <mat-divider></mat-divider>
                <div class="header" fxLayout="row" fxLayoutAlign="center end">
                    <p class="product-quantity">{{order.shippingInfo.state | lowercase}},
                        {{order.shippingInfo.country | lowercase}}. {{order.shippingInfo.zipCode | lowercase}}</p>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
</div>