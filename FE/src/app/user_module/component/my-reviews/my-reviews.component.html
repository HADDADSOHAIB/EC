<div fxLayout="column" fxLayoutAlign="start center" class="reviews-section">
    <mat-card class="reviews-section" #reviewCard *ngFor="let review of myReviews;index as i;">
        <mat-card-content *ngIf="idOfReviewToModify!=review.id">
            <div fxLayout="column" fxLayoutAlign="start center" >
                <div>
                    <a routerLink="#" (click)="goProduct(review.productId)">
                        {{myProducts.get(review.productId).productName}}
                    </a>
                </div>
                <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
                    <button mat-button class="user-name">My Rating :</button>
                    <rating-bar [rating]="review.userRating" readOnly="true"></rating-bar>
                    <button mat-button class="user-name">Product Rating :</button>
                    <rating-bar [rating]="myProducts.get(review.productId).rating" readOnly="true"></rating-bar>
                </div>
            </div>
            <mat-divider class="user-name"></mat-divider>
            <div fxLayout="row" fxLayoutAlign="space-between center">
                <p>{{review.userReview}}</p>
                <div *ngIf="currentUser.userEmail==review.user.userEmail">
                    <button mat-button (click)="editReview(review.id,i)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-button (click)="deleteReview(review.id)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </div>
        </mat-card-content>
        <mat-card-content *ngIf="idOfReviewToModify==review.id">
            <div fxLayout="column" fxLayoutAlign="start center">
                <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="20px">
                    <button mat-button
                        class="user-name">{{review.user.firstName+" "+review.user.lastName | uppercase}}</button>
                    <rating-bar [rating]="review.userRating" (ratingChange)="modifyRating($event)"></rating-bar>
                </div>
                <mat-card-content class="add-review">
                    <mat-form-field class="add-review" appearance="outline">
                        <mat-label>Comment about the product</mat-label>
                        <textarea matInput placeholder="Add a comment" cdkTextareaAutosize="true"
                            matTextareaAutosize="true" cdkAutosizeMinRows="6"
                            [(ngModel)]="productReviewModified.userReview"></textarea>
                    </mat-form-field>
                </mat-card-content>
                <mat-card-actions>
                    <button mat-button color='primary' style="float: right;"
                        (click)="saveModifiedReview(review.id)">save</button>
                    <button mat-button color='warn' (click)="cancelModification()">cancel</button>
                </mat-card-actions>
            </div>
        </mat-card-content>
    </mat-card>
</div>