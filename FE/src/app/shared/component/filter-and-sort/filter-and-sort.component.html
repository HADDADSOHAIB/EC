<mat-nav-list>
    <a mat-list-item (click)="toggleSearch()">
        <mat-icon aria-hidden="false">search</mat-icon>
        <span class="nav-caption">Search</span>
    </a>
    <div class="search" fxLayout="column" fxLayoutAlign="start center" *ngIf="showSearch">
        <mat-form-field class="price-form" *ngIf="isQuerySearchSet">
            <mat-chip-list #chipList>
                <mat-chip [selectable]="selectable" [removable]="removable" (click)="clearSearch()">
                    {{selectedSearchQuery }}
                    <mat-icon matChipRemove (click)="clearSearch()">cancel</mat-icon>
                </mat-chip>
            </mat-chip-list>
        </mat-form-field>
        <mat-form-field appearance="outline" class="search">
            <mat-label>Search a product</mat-label>
            <input matInput placeholder="Search a product" [(ngModel)]="searchQuery" (keyup.enter)="search()">
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
    </div>
    <mat-divider></mat-divider>
    <a mat-list-item (click)="toggleFilters()">
        <mat-icon aria-hidden="false">filter_list</mat-icon>
        <span class="nav-caption">Filters</span>
    </a>
    <mat-divider></mat-divider>
    <a mat-list-item *ngIf="showFilters" (click)="toggleFilterByCategory()" class="by-category">
        <mat-icon aria-hidden="false">category</mat-icon>
        <span class="nav-caption">By Category</span>
    </a>
    <mat-selection-list (selectionChange)="filterCategory($event.option._value,$event.option._selected)"
        *ngIf="showFilters && showFilterByCategory">
        <mat-list-option *ngFor="let category of categoriesToShow" [value]="category.categoryId"
            checkboxPosition='before' [selected]="options.categoryList.includes(category.categoryId)" class="option">
            {{category.categoryName}}
        </mat-list-option>
    </mat-selection-list>
    <a mat-list-item (click)="toggleCategoryOptions()" *ngIf="showFilters && showFilterByCategory">
        <span class="nav-caption more-options" *ngIf="!showAllCategories && showFilters && showFilterByCategory">
            ... show more
        </span>
        <span class="nav-caption more-options" *ngIf="showAllCategories && showFilters && showFilterByCategory">
            show less
        </span>
    </a>
    <mat-divider *ngIf="showFilters "></mat-divider>
    <a mat-list-item *ngIf="showFilters " (click)="toggleFilterByPrice()" class="by-price">
        <mat-icon aria-hidden="false">monetization_on</mat-icon>
        <span class="nav-caption">By Price</span>
    </a>
    <div fxLayout="column" fxLayoutAlign="start center" *ngIf="showFilters && showFilterByPrice">
        <form [formGroup]="priceFilterForm" class="price-form">
            <mat-form-field class="price-form" *ngIf="isFilterByPriceSet && (filterAndSortOptions.prices[0]!=0 || filterAndSortOptions.prices[1]!=1000000)">
                <mat-chip-list #chipList>
                    <mat-chip [selectable]="selectable" [removable]="removable" (click)="clearFilterByPrice()">
                        MAD{{options.prices[0]}}--MAD{{options.prices[1]}}
                        <mat-icon matChipRemove (click)="clearFilterByPrice()">cancel</mat-icon>
                    </mat-chip>
                </mat-chip-list>
            </mat-form-field>
            <mat-form-field appearance="outline" class="price-form">
                <mat-label>Lower limit</mat-label>
                <input matInput placeholder="Lower limit" type="number" formControlName="lowerLimit">
                <span matPrefix>MAD&nbsp;</span>
            </mat-form-field>
            <mat-form-field appearance="outline" class="price-form">
                <mat-label>Upper limit</mat-label>
                <input matInput placeholder="Upper limit" type="number" formControlName="upperLimit">
                <span matPrefix>MAD&nbsp;</span>
            </mat-form-field>
        </form>
        <button mat-flat-button color="warn" (click)="filterByPrice()">Apply</button>
    </div>
    <mat-divider *ngIf="showFilters"></mat-divider>
    <a mat-list-item (click)="toggleSortBy()">
        <mat-icon aria-hidden="false">sort_by_alpha</mat-icon>
        <span class="nav-caption">Sort By</span>
    </a>

    <mat-radio-group (change)="sortField($event.value)" fxLayout="column" fxLayoutAlign="start start"
        *ngIf="showSortBy">
        <mat-radio-button value="productName" [checked]="options.sort[0]==='productName'">
            Product Name
        </mat-radio-button>
        <mat-radio-button value="price" [checked]="options.sort[0]==='price'">
            Product Price
        </mat-radio-button>
        <mat-radio-button value="rating" [checked]="options.sort[0]==='rating'">
            Product Rating
        </mat-radio-button>
    </mat-radio-group>
    <mat-radio-group (change)="sortDirection($event.value)" fxLayout="column" fxLayoutAlign="start start"
        *ngIf="showSortBy">
        <mat-radio-button value="asc" [checked]="this.options.sort[1]==='asc'">
            Ascending
        </mat-radio-button>
        <mat-radio-button value="desc" [checked]="this.options.sort[1]==='desc'">
            Descending
        </mat-radio-button>
    </mat-radio-group>
</mat-nav-list>